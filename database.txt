CREATE TABLE `Users` (
	`UserID` INT NOT NULL DEFAULT 0,
	`Username` VARCHAR(50) NULL DEFAULT NULL,
	`FirstName` VARCHAR(50) NULL DEFAULT NULL,
	`LastName` VARCHAR(50) NULL DEFAULT NULL,
	`email` VARCHAR(50) NULL DEFAULT NULL,
	`Phone` INT NULL DEFAULT NULL,
	`password` VARCHAR(50) NULL DEFAULT NULL,
	`sec_quest` VARCHAR(50) NULL DEFAULT NULL,
	`sec_ans` VARCHAR(50) NULL DEFAULT NULL,
	PRIMARY KEY (`UserID`)
)
COLLATE='utf8mb3_general_ci'
AUTO_INCREMENT=1
;

CREATE TABLE `Accounts` (
	`AccountName` VARCHAR(50) NULL DEFAULT NULL,
	`AccountID` INT NOT NULL AUTO_INCREMENT,
	`TypeOfAcct` INT NOT NULL DEFAULT '0',
	`UserID` INT NOT NULL DEFAULT '0',
	`Balance` FLOAT NOT NULL DEFAULT 0,
	`hist_bal` JSON NOT NULL,
	`API_info` JSON NOT NULL,
	`CSV_info` JSON NOT NULL,
	PRIMARY KEY (`AccountID`),
	INDEX `UserID` (`UserID`),
	CONSTRAINT `FK__users` FOREIGN KEY (`UserID`) REFERENCES `users` (`UserID`) ON UPDATE NO ACTION ON DELETE NO ACTION
)
COLLATE='utf8mb3_general_ci'
;

CREATE TABLE `Graphs` (
	`GraphName` VARCHAR(50) NULL DEFAULT NULL,
	`GraphID` INT NOT NULL AUTO_INCREMENT,
	`UserID` INT NOT NULL DEFAULT '0',
	`Account1` INT NOT NULL DEFAULT '0',
	`Account2` INT NOT NULL DEFAULT '0',
	`Account3` INT NOT NULL DEFAULT '0',
	`GraphType` INT NOT NULL DEFAULT '0',
	`NormalizationType` INT NOT NULL DEFAULT '0',
	PRIMARY KEY (`GraphID`),
	CONSTRAINT `FK__accounts` FOREIGN KEY (`Account1`) REFERENCES `accounts` (`AccountID`) ON UPDATE NO ACTION ON DELETE NO ACTION,
	CONSTRAINT `FK__accounts_2` FOREIGN KEY (`Account2`) REFERENCES `accounts` (`AccountID`) ON UPDATE NO ACTION ON DELETE NO ACTION,
	CONSTRAINT `FK__accounts_3` FOREIGN KEY (`Account3`) REFERENCES `accounts` (`AccountID`) ON UPDATE NO ACTION ON DELETE NO ACTION
)
COLLATE='utf8mb3_general_ci'
;

CREATE TABLE `Income_Expense` (
	`Name` VARCHAR(50) NULL DEFAULT NULL,
	`Inc_Exp` BINARY(50) NULL DEFAULT NULL,
	`EntryID` INT NOT NULL AUTO_INCREMENT,
	`Amount` FLOAT NOT NULL DEFAULT 0,
	`Frequency` INT NOT NULL DEFAULT 0,
	PRIMARY KEY (`EntryID`)
)
COLLATE='utf8mb3_general_ci'
;

CREATE TABLE `Budget` (
	`BudgetName` VARCHAR(50) NULL DEFAULT NULL,
	`BudgetID` INT NOT NULL,
	`UserID` INT NULL,
	`Exp_Inc` INT NULL DEFAULT NULL,
	`Surplus_Deficit` FLOAT NULL DEFAULT NULL,
	PRIMARY KEY (`BudgetID`),
	CONSTRAINT `FK__income_expense` FOREIGN KEY (`Exp_Inc`) REFERENCES `income_expense` (`EntryID`) ON UPDATE NO ACTION ON DELETE NO ACTION
)
COLLATE='utf8mb3_general_ci'
;
CREATE TABLE `Dashboard` (
	`DashboardID` INT NOT NULL AUTO_INCREMENT,
	`UserID` INT NULL,
	`GraphID` INT NULL,
	`BudgetID` INT NULL,
	PRIMARY KEY (`DashboardID`),
	CONSTRAINT `FK__users` FOREIGN KEY (`UserID`) REFERENCES `users` () ON UPDATE NO ACTION ON DELETE NO ACTION,
	CONSTRAINT `FK__graphs` FOREIGN KEY (`GraphID`) REFERENCES `graphs` () ON UPDATE NO ACTION ON DELETE NO ACTION
	CONSTRAINT `FK__budget` FOREIGN KEY (`BudgetID`) REFERENCES `budget` () ON UPDATE NO ACTION ON DELETE NO ACTION
)
COLLATE='utf8mb3_general_ci'
;



